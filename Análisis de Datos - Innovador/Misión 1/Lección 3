# Mapa de precios de gasolina en Colombia

PS C:\Users\USUARIO\Desktop\TT\AD\docker docker run -p 8888:8888  geopandas_img

[+] Building 1.0s (3/3) FINISHED                                                                         docker:default
 => [internal] load build definition from Dockerfile                                                               0.0s
 => => transferring dockerfile: 164B                                                                               0.0s
 => ERROR [internal] load metadata for docker.io/jupyter/jupyter/scipy-notebook:latest                             0.9s
 => [auth] jupyter/jupyter/scipy-notebook:pull token for registry-1.docker.io                                      0.0s
------
 > [internal] load metadata for docker.io/jupyter/jupyter/scipy-notebook:latest:
------
Dockerfile:1
--------------------
   1 | >>> FROM jupyter/jupyter/scipy-notebook
   2 |     RUN pip install numpy matplotlib geopandas mapclassify seanborn
   3 |     COPY datasets /datasets
--------------------
ERROR: failed to solve: jupyter/jupyter/scipy-notebook: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed
[+] Building 204.5s (9/9) FINISHED                                                                       docker:default
 => [internal] load build definition from Dockerfile                                                               0.0se
 => => transferring dockerfile: 142B                                                                               0.0s
 => [internal] load metadata for docker.io/jupyter/scipy-notebook:latest                                           1.6s
 => [auth] jupyter/scipy-notebook:pull token for registry-1.docker.io                                              0.0s
 => [internal] load .dockerignore                                                                                  0.0s
 => => transferring context: 2B                                                                                    0.0s
 => [1/3] FROM docker.io/jupyter/scipy-notebook:latest@sha256:fca4bcc9cbd49d9a15e0e4df6c666adf17776c950da9fa94a  190.6s
 => => resolve docker.io/jupyter/scipy-notebook:latest@sha256:fca4bcc9cbd49d9a15e0e4df6c666adf17776c950da9fa94a4f  0.0s
 => => sha256:088f11eb1e74ae07b0c0cfefb7906e1821c0b84f00524cc8e4011c276fe7d2d7 679B / 679B                         0.2s
 => => sha256:ad65fcfebde3d9d6590bca3f709f1e386a4e56bd63654c0babd5ebf41e9edd9e 18.57kB / 18.57kB                   0.0s
 => => sha256:fca4bcc9cbd49d9a15e0e4df6c666adf17776c950da9fa94a4f0a045d5c4ad33 772B / 772B                         0.0s
 => => sha256:bf4de44b0fa8a422ebc325e695d572d304bd290c055e028a6507921a294213bc 6.78kB / 6.78kB                     0.0s
 => => sha256:fd92c719666cac5862b8ea1e034eeb038c7191d52d0ff468c0a90ed68c0420a4 8.82MB / 8.82MB                     2.8s
 => => sha256:aece8493d3972efa43bfd4ee3cdba659c0f787f8f59c82fb3e48c87cbb22a12e 29.54MB / 29.54MB                   3.8s
 => => sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1 32B / 32B                           0.7s
 => => sha256:ef8373d600b0ac4a916da50b72cb116efc56800836a264d1dd8ea8e07e76256d 1.92kB / 1.92kB                     1.0s
 => => sha256:77e45ee945dc8a1ce57be013482750833e7721903814e42510a3db2a05940aee 4.92kB / 4.92kB                     1.3s
 => => sha256:a30f89a0af6c7f64872ff93f4a9445b9d25f1206982670a911b2c83b672f443a 151B / 151B                         1.6s
 => => sha256:dc42adc7eb7398a8589bad907643f9b08467de588b3c2719c78302d5ec480446 276B / 276B                         2.3s
 => => sha256:abaa8376a6502612b92e1750cee7aa450ef045e23a418077439a392b0c224f2e 104.82MB / 104.82MB                23.6s
 => => sha256:aa099bb9e49a60e4a86d1015fa7be3ea1dc1dc87153a0c0767dac5c3df94babb 4.40kB / 4.40kB                     3.1s
 => => sha256:822c4cbcf6a6b7660f90516cd166125d55de917a2f18c086eee2abe52c1b7e9a 181B / 181B                         3.3s
 => => sha256:d25166dcdc7b4776765e67e9b3548b023fb7bf2a9bd1d14746fa3d1d902279a0 30.50MB / 30.50MB                   9.1s
 => => sha256:964fc3e4ff9f3bb80c77f28ca6318e4e121dc657731158efb42f322dd7f521c3 137.74MB / 137.74MB                23.4s
 => => extracting sha256:aece8493d3972efa43bfd4ee3cdba659c0f787f8f59c82fb3e48c87cbb22a12e                          3.4s
 => => extracting sha256:fd92c719666cac5862b8ea1e034eeb038c7191d52d0ff468c0a90ed68c0420a4                          1.3s
 => => extracting sha256:088f11eb1e74ae07b0c0cfefb7906e1821c0b84f00524cc8e4011c276fe7d2d7                          0.0s
 => => extracting sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1                          0.0s
 => => extracting sha256:ef8373d600b0ac4a916da50b72cb116efc56800836a264d1dd8ea8e07e76256d                          0.0s
 => => sha256:2c4c69587ee486a6d786449a71621bdcbc4ad1653c5f7f5848e0eb5a7deaa786 1.15kB / 1.15kB                     9.3s
 => => extracting sha256:77e45ee945dc8a1ce57be013482750833e7721903814e42510a3db2a05940aee                          0.0s
 => => extracting sha256:a30f89a0af6c7f64872ff93f4a9445b9d25f1206982670a911b2c83b672f443a                          0.0s
 => => extracting sha256:dc42adc7eb7398a8589bad907643f9b08467de588b3c2719c78302d5ec480446                          0.0s
 => => sha256:de2cdd875fa8d3fe6e191d8b1c0dd0bfb677cba16a0fe1a67dd66bef00da6dac 1.42kB / 1.42kB                     9.6s
 => => sha256:75d33599f5f251fdff33b1556b84d51b4bfef6781fe41672deea7a5fae31b57e 1.43kB / 1.43kB                     9.8s
 => => sha256:31973ea8247081810aedfbad471cb29e8cad519f6e0cd488b6692b04e61ada5d 178.43MB / 178.43MB                43.2s
 => => sha256:96ee7e4439c77a57032d37c61ee62749216ebdd514e813e96123a92076ccc967 1.47kB / 1.47kB                    23.8s
 => => extracting sha256:abaa8376a6502612b92e1750cee7aa450ef045e23a418077439a392b0c224f2e                         18.3s
 => => sha256:1f9ad23c07ac8f228ec821f2095f22735c64308e16073c52722cd5d113f7f880 437B / 437B                        23.9s
 => => sha256:d19266e0cb17753722408d50ece152f5c2cd764246d9ce4cbf6c20a82d4ccb4c 1.26kB / 1.26kB                    24.0s
 => => sha256:9a165b6e9dc7f764933ed13711e8d3d2866e635d3c5740cfc3a1d303b0c1968d 279.53MB / 279.53MB                52.2s
 => => sha256:5689442fd4e1eb2168a70199d7321f5dde66f5dcecc207e57836a6baac48260d 236B / 236B                        24.2s
 => => sha256:9a6a202f62a6599a1ebad61a11e5d953f35736256aa11509a8f369883cdcd4e3 546.28MB / 546.28MB                85.1s
 => => extracting sha256:aa099bb9e49a60e4a86d1015fa7be3ea1dc1dc87153a0c0767dac5c3df94babb                          0.0s
 => => extracting sha256:822c4cbcf6a6b7660f90516cd166125d55de917a2f18c086eee2abe52c1b7e9a                          0.0s
 => => extracting sha256:d25166dcdc7b4776765e67e9b3548b023fb7bf2a9bd1d14746fa3d1d902279a0                          4.0s
 => => sha256:734ea0c3d94e1cb3af924749a5493983109f80abdadf70e919717767c04ed676 597.22kB / 597.22kB                43.9s
 => => sha256:a21a167f71274a2618b5ffb4187cbd6dafa5ac63d7179a54fc097e0e7b742f63 7.12kB / 7.12kB                    44.2s
 => => extracting sha256:964fc3e4ff9f3bb80c77f28ca6318e4e121dc657731158efb42f322dd7f521c3                         27.9s
 => => extracting sha256:2c4c69587ee486a6d786449a71621bdcbc4ad1653c5f7f5848e0eb5a7deaa786                          0.1s
 => => extracting sha256:de2cdd875fa8d3fe6e191d8b1c0dd0bfb677cba16a0fe1a67dd66bef00da6dac                          0.0s
 => => extracting sha256:75d33599f5f251fdff33b1556b84d51b4bfef6781fe41672deea7a5fae31b57e                          0.0s
 => => extracting sha256:31973ea8247081810aedfbad471cb29e8cad519f6e0cd488b6692b04e61ada5d                         33.7s
 => => extracting sha256:96ee7e4439c77a57032d37c61ee62749216ebdd514e813e96123a92076ccc967                          0.0s
 => => extracting sha256:1f9ad23c07ac8f228ec821f2095f22735c64308e16073c52722cd5d113f7f880                          0.0s
 => => extracting sha256:d19266e0cb17753722408d50ece152f5c2cd764246d9ce4cbf6c20a82d4ccb4c                          0.0s
 => => extracting sha256:9a165b6e9dc7f764933ed13711e8d3d2866e635d3c5740cfc3a1d303b0c1968d                         23.4s
 => => extracting sha256:5689442fd4e1eb2168a70199d7321f5dde66f5dcecc207e57836a6baac48260d                          0.0s
 => => extracting sha256:9a6a202f62a6599a1ebad61a11e5d953f35736256aa11509a8f369883cdcd4e3                         54.6s
 => => extracting sha256:734ea0c3d94e1cb3af924749a5493983109f80abdadf70e919717767c04ed676                          0.0s
 => => extracting sha256:a21a167f71274a2618b5ffb4187cbd6dafa5ac63d7179a54fc097e0e7b742f63                          0.0s
 => [internal] load build context                                                                                  3.2s
 => => transferring context: 42.23MB                                                                               3.2s
 => [2/3] RUN pip install geopandas mapclassify seaborn                                                           10.3s
 => [3/3] COPY datasets /datasets                                                                                  0.9s
 => exporting to image                                                                                             0.7s
 => => exporting layers                                                                                            0.7s
 => => writing image sha256:032c5683147c54c3e0a5e853b3cadde5a0c5f4c151a46bae45b18c882a3eafe0                       0.0s
 => => naming to docker.io/library/geopandas_img                                                                   0.0s

What's Next?
  View a summary of image vulnerabilities and recommendations â†’ docker scout quickview
PS C:\Users\USUARIO\Desktop\TT\AD\docker> docker run -p 8888:8888  geopandas_img
Entered start.sh with args: jupyter lab
Running hooks in: /usr/local/bin/start-notebook.d as uid: 1000 gid: 100
Done running hooks in: /usr/local/bin/start-notebook.d
Running hooks in: /usr/local/bin/before-notebook.d as uid: 1000 gid: 100
Done running hooks in: /usr/local/bin/before-notebook.d
Executing the command: jupyter lab
[I 2024-04-08 17:54:07.561 ServerApp] Package jupyterlab took 0.0000s to import
[I 2024-04-08 17:54:07.599 ServerApp] Package jupyter_lsp took 0.0376s to import
[W 2024-04-08 17:54:07.599 ServerApp] A `_jupyter_server_extension_points` function was not found in jupyter_lsp. Instead, a `_jupyter_server_extension_paths` function was found and will be used for now. This function name will be deprecated in future releases of Jupyter Server.
[I 2024-04-08 17:54:07.602 ServerApp] Package jupyter_server_mathjax took 0.0018s to import
[I 2024-04-08 17:54:07.619 ServerApp] Package jupyter_server_terminals took 0.0167s to import
[I 2024-04-08 17:54:07.689 ServerApp] Package jupyterlab_git took 0.0683s to import
[I 2024-04-08 17:54:07.695 ServerApp] Package nbclassic took 0.0061s to import
[W 2024-04-08 17:54:07.700 ServerApp] A `_jupyter_server_extension_points` function was not found in nbclassic. Instead, a `_jupyter_server_extension_paths` function was found and will be used for now. This function name will be deprecated in future releases of Jupyter Server.
[I 2024-04-08 17:54:07.700 ServerApp] Package nbdime took 0.0000s to import
[I 2024-04-08 17:54:07.701 ServerApp] Package notebook took 0.0000s to import
[I 2024-04-08 17:54:07.707 ServerApp] Package notebook_shim took 0.0000s to import
[W 2024-04-08 17:54:07.707 ServerApp] A `_jupyter_server_extension_points` function was not found in notebook_shim. Instead, a `_jupyter_server_extension_paths` function was found and will be used for now. This function name will be deprecated in future releases of Jupyter Server.
[I 2024-04-08 17:54:07.711 ServerApp] jupyter_lsp | extension was successfully linked.
[I 2024-04-08 17:54:07.724 ServerApp] jupyter_server_mathjax | extension was successfully linked.
[I 2024-04-08 17:54:07.730 ServerApp] jupyter_server_terminals | extension was successfully linked.
[I 2024-04-08 17:54:07.742 ServerApp] jupyterlab | extension was successfully linked.
[I 2024-04-08 17:54:07.743 ServerApp] jupyterlab_git | extension was successfully linked.
[I 2024-04-08 17:54:07.756 ServerApp] nbclassic | extension was successfully linked.
[I 2024-04-08 17:54:07.757 ServerApp] nbdime | extension was successfully linked.
[I 2024-04-08 17:54:07.765 ServerApp] notebook | extension was successfully linked.
[I 2024-04-08 17:54:07.773 ServerApp] Writing Jupyter server cookie secret to /home/jovyan/.local/share/jupyter/runtime/jupyter_cookie_secret
[I 2024-04-08 17:54:08.253 ServerApp] notebook_shim | extension was successfully linked.
[I 2024-04-08 17:54:08.333 ServerApp] notebook_shim | extension was successfully loaded.
[I 2024-04-08 17:54:08.337 ServerApp] jupyter_lsp | extension was successfully loaded.
[I 2024-04-08 17:54:08.339 ServerApp] jupyter_server_mathjax | extension was successfully loaded.
[I 2024-04-08 17:54:08.341 ServerApp] jupyter_server_terminals | extension was successfully loaded.
[I 2024-04-08 17:54:08.346 LabApp] JupyterLab extension loaded from /opt/conda/lib/python3.11/site-packages/jupyterlab
[I 2024-04-08 17:54:08.346 LabApp] JupyterLab application directory is /opt/conda/share/jupyter/lab
[I 2024-04-08 17:54:08.348 LabApp] Extension Manager is 'pypi'.
[I 2024-04-08 17:54:08.357 ServerApp] jupyterlab | extension was successfully loaded.
[I 2024-04-08 17:54:08.366 ServerApp] jupyterlab_git | extension was successfully loaded.
[I 2024-04-08 17:54:08.381 ServerApp] nbclassic | extension was successfully loaded.
[I 2024-04-08 17:54:08.482 ServerApp] nbdime | extension was successfully loaded.
[I 2024-04-08 17:54:08.488 ServerApp] notebook | extension was successfully loaded.
[I 2024-04-08 17:54:08.489 ServerApp] Serving notebooks from local directory: /home/jovyan
[I 2024-04-08 17:54:08.489 ServerApp] Jupyter Server 2.8.0 is running at:
[I 2024-04-08 17:54:08.489 ServerApp] http://f7da7ca290ec:8888/lab?token=410917c82c4f75fff714b65ba74486167d77b304bec13b72
[I 2024-04-08 17:54:08.490 ServerApp]     http://127.0.0.1:8888/lab?token=410917c82c4f75fff714b65ba74486167d77b304bec13b72
[I 2024-04-08 17:54:08.490 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 2024-04-08 17:54:08.495 ServerApp]

    To access the server, open this file in a browser:
        file:///home/jovyan/.local/share/jupyter/runtime/jpserver-7-open.html
    Or copy and paste one of these URLs:
        http://f7da7ca290ec:8888/lab?token=410917c82c4f75fff714b65ba74486167d77b304bec13b72
        http://127.0.0.1:8888/lab?token=410917c82c4f75fff714b65ba74486167d77b304bec13b72
[I 2024-04-08 17:54:09.395 ServerApp] Skipped non-installed server(s): bash-language-server, dockerfile-language-server-nodejs, javascript-typescript-langserver, jedi-language-server, julia-language-server, pyright, python-language-server, python-lsp-server, r-languageserver, sql-language-server, texlab, typescript-language-server, unified-language-server, vscode-css-languageserver-bin, vscode-html-languageserver-bin, vscode-json-languageserver-bin, yaml-language-server
0.02s - Debugger warning: It seems that frozen modules are being used, which may
0.00s - make the debugger miss breakpoints. Please pass -Xfrozen_modules=off
0.00s - to python to disable frozen modules.
0.00s - Note: Debugging will proceed. Set PYDEVD_DISABLE_FILE_VALIDATION=1 to disable this validation.
[W 2024-04-08 22:10:15.428 LabApp] The extension "nbdime-jupyterlab" is outdated.

[I 2024-04-08 22:10:15.432 LabApp] Build is up to date
[I 2024-04-08 22:10:44.515 ServerApp] Creating new notebook in
[I 2024-04-08 22:10:44.644 ServerApp] Writing notebook-signing key to /home/jovyan/.local/share/jupyter/notebook_secret
[I 2024-04-08 22:10:45.616 ServerApp] Kernel started: e4115897-ef9a-4ac0-a1b7-5b7d2fca41ef
0.00s - Debugger warning: It seems that frozen modules are being used, which may
0.00s - make the debugger miss breakpoints. Please pass -Xfrozen_modules=off
0.00s - to python to disable frozen modules.
0.00s - Note: Debugging will proceed. Set PYDEVD_DISABLE_FILE_VALIDATION=1 to disable this validation.
[I 2024-04-08 22:10:47.675 ServerApp] Connecting to kernel e4115897-ef9a-4ac0-a1b7-5b7d2fca41ef.
[I 2024-04-08 22:10:47.701 ServerApp] Connecting to kernel e4115897-ef9a-4ac0-a1b7-5b7d2fca41ef.
[I 2024-04-08 22:10:47.724 ServerApp] Connecting to kernel e4115897-ef9a-4ac0-a1b7-5b7d2fca41ef.
[I 2024-04-08 22:12:44.889 ServerApp] Saving file at /Untitled.ipynb
[I 2024-04-08 22:14:44.939 ServerApp] Saving file at /Untitled.ipynb

# Importar en jypiter notebook

import geopandas as gpd
import numpy as np 
import matplotlib.pyplot as plt 
import shapely as shp 
import pandas as pd

ruta_municipios = 'municipios.geojson'
ruta_precios = 'precios_combustible.csv'

precios = gpd.read_file(ruta_precios)
shapes = gpd.read_file(ruta_municipios)

shapes.plot()

# Listar los productos para escoger uno
precios["producto"].unique()
precios_gasolina = precios[precios["producto"] == "GASOLINA CORRIENTE OXIGENADA"] # filtrar por producto
print(len(precios_gasolina))
precios_gasolina.head()

precios_agrupados = precios_gasolina.groupby("municipionombre", as_index=False)["precio"].agg(["max"])
precios_mapa = shapes.merge(precios_agrupados, right_on="municipionombre",left_on="MPIO_CNMBR")

# Dibujar sobre el mapa 
axis = shapes["geometry"].plot(figsize=(20, 12))
precios_mapa["max"] = precios_mapa["max"].apply(lambda x: int(x))
precios_mapa.plot(column="max", ax=axis, legend=True, scheme="Quantiles", k=10, cmap="gist_rainbow")
axis.set_title("Precios de gasolina 2018")

